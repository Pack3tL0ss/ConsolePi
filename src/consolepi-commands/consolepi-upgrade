#!/usr/bin/env bash

branch=$(pushd /etc/ConsolePi >/dev/null && sudo git status | head -1 | awk '{print $3}' && popd >/dev/null)
[ ! "$branch" == "master" ] && echo -e "Script updating ${branch} branch.\n  You are on a development branch."
if [ ! -z "$@" ] && [ $1 == "loc" ] ; then
    echo "Local Pull"
    sftp pi@10.0.30.113:/etc/ConsolePi/installer/install.sh /tmp/ConsolePi && sudo bash /tmp/ConsolePi && sudo rm -r /tmp/ConsolePi
else
    sudo wget -q https://raw.githubusercontent.com/Pack3tL0ss/ConsolePi/$branch/installer/install.sh -O /tmp/ConsolePi && sudo bash /tmp/ConsolePi && sudo rm -f /tmp/ConsolePi
fi
